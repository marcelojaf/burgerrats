<?xml version="1.0" encoding="UTF-8"?>
<project_specification>
  <project_name>BurgerRats</project_name>

  <overview>
    BurgerRats is a mobile gamification app for burger enthusiasts, inspired by the GymRats app concept. The app allows users to create and join leagues (ligas) where they compete with friends by doing daily check-ins when eating burgers. Each check-in requires photo proof to be validated and grants one point in the league ranking. The competitive social aspect encourages friendly rivalry among burger lovers, creating a fun and engaging experience around the shared activity of enjoying hamburgers. Key goals include: fostering social connections through shared food experiences, gamifying burger consumption with a competitive points system, ensuring authenticity through mandatory photo verification, and limiting to one check-in per day to maintain fair competition.
  </overview>

  <technology_stack>
    <technology>Flutter (Dart) - Cross-platform mobile framework</technology>
    <technology>iOS Platform Support</technology>
    <technology>Android Platform Support</technology>
    <technology>Firebase Authentication - User authentication and management</technology>
    <technology>Firebase Firestore - NoSQL database for leagues, users, and check-ins</technology>
    <technology>Firebase Storage - Photo storage for check-in images</technology>
    <technology>Firebase Cloud Messaging - Push notifications for league activities</technology>
    <technology>Provider or Riverpod - State management</technology>
    <technology>Camera Plugin - Native camera access for check-in photos</technology>
    <technology>Image Picker - Photo selection from gallery</technology>
    <technology>Cached Network Image - Efficient image loading and caching</technology>
    <technology>Flutter Secure Storage - Secure local data storage</technology>
    <technology>Go Router or Auto Route - Navigation management</technology>
    <technology>Intl - Internationalization support (PT-BR primary)</technology>
    <technology>Flutter Local Notifications - Local notification handling</technology>
  </technology_stack>

  <core_capabilities>
    <capability>User registration and authentication with email/password and social login options</capability>
    <capability>League (Liga) creation with customizable names and settings</capability>
    <capability>League discovery and joining via invitation codes or links</capability>
    <capability>Daily check-in system with mandatory photo upload</capability>
    <capability>Photo validation and storage for check-in proof</capability>
    <capability>One check-in per day limit enforcement per user per league</capability>
    <capability>Real-time league leaderboard and rankings</capability>
    <capability>Check-in history with photo gallery view</capability>
    <capability>Push notifications for league activities and reminders</capability>
    <capability>User profile management with statistics</capability>
    <capability>League member management (invite, remove, admin roles)</capability>
    <capability>Activity feed showing recent check-ins from league members</capability>
    <capability>Streak tracking for consecutive daily check-ins</capability>
    <capability>Social sharing of check-ins and achievements</capability>
  </core_capabilities>

  <implemented_features>
    <feature>
      <name>Project Initialization</name>
      <description>Git repository has been initialized for version control. The project structure is set up with automaker configuration files for AI-assisted development workflow.</description>
      <file_locations>
        <location>.git/</location>
        <location>.automaker/</location>
      </file_locations>
    </feature>
    <feature>
      <name>Flutter Project Initialization</name>
      <description>Create new Flutter project with proper package name, bundle identifiers, and initial configuration. Set up minimum SDK versions for iOS 12.0 and Android SDK 21.</description>
    </feature>
    <feature>
      <name>Clean Architecture Folder Structure</name>
      <description>Set up feature-first folder structure with clean architecture layers (presentation, domain, data). Create base directories for core, features, and shared modules.</description>
    </feature>
    <feature>
      <name>Firebase Project Configuration</name>
      <description>Create Firebase project, enable Authentication, Firestore, Storage, and Cloud Messaging. Add google-services.json and GoogleService-Info.plist to the Flutter project.</description>
    </feature>
    <feature>
      <name>Material Design 3 Theme System</name>
      <description>Create app-wide theme with Material Design 3 components, color schemes, typography, and spacing constants. Support light and dark mode with Portuguese-friendly fonts.</description>
    </feature>
    <feature>
      <name>Dependency Injection Container</name>
      <description>Set up dependency injection using get_it or injectable for service locator pattern. Configure injectable services and repositories for testability.</description>
    </feature>
    <feature>
      <name>Navigation Router Configuration</name>
      <description>Implement Go Router or Auto Route for declarative navigation. Define routes for authentication, home, leagues, check-ins, and profile screens.</description>
    </feature>
    <feature>
      <name>Error Handling Framework</name>
      <description>Create custom exception classes, error handlers, and user-friendly error messages in Portuguese. Implement global error boundary for uncaught exceptions.</description>
    </feature>
    <feature>
      <name>Camera Permission Handler</name>
      <description>Request and manage camera permissions for iOS and Android. Show user-friendly messages in Portuguese explaining why permissions are needed.</description>
    </feature>
    <feature>
      <name>Photo Capture Service</name>
      <description>Integrate camera plugin to capture photos for check-ins. Provide fallback to select from gallery. Handle camera errors gracefully.</description>
    </feature>
    <feature>
      <name>Image Compression Service</name>
      <description>Compress and optimize images before upload to reduce storage costs and improve performance. Resize to appropriate dimensions while maintaining quality.</description>
    </feature>
    <feature>
      <name>State Management Configuration</name>
      <description>Set up Riverpod or Provider for state management across the app. Create base providers and notifiers for common state patterns.</description>
    </feature>
    <feature>
      <name>User Data Model</name>
      <description>Define user model with fields for uid, email, displayName, photoURL, createdAt, and statistics. Implement JSON serialization for Firestore.</description>
    </feature>
    <feature>
      <name>Deep Linking Configuration</name>
      <description>Configure deep links for league invitations and check-in sharing. Handle app opening from links on both iOS and Android.</description>
    </feature>
    <feature>
      <name>User Repository</name>
      <description>Create repository for user CRUD operations in Firestore. Implement methods to create, read, update user profiles and sync with authentication.</description>
    </feature>
    <feature>
      <name>League Data Model</name>
      <description>Define league model with id, name, description, createdBy, members, inviteCode, createdAt, and settings. Implement Firestore serialization.</description>
    </feature>
    <feature>
      <name>Check-In Data Model</name>
      <description>Define check-in model with id, userId, leagueId, photoURL, timestamp, and optional location. Implement Firestore serialization with proper indexing.</description>
    </feature>
    <feature>
      <name>Check-In Repository</name>
      <description>Create repository for check-in operations with methods to create check-ins, validate daily limits, and query by user/league. Implement real-time listeners.</description>
    </feature>
    <feature>
      <name>League Repository</name>
      <description>Create repository for league operations in Firestore. Implement create, read, update, delete leagues and manage member lists with real-time updates.</description>
    </feature>
    <feature>
      <name>Daily Check-In Limit Validator</name>
      <description>Validate that users can only check-in once per day per league. Check existing check-ins for current date before allowing new submissions.</description>
    </feature>
    <feature>
      <name>League Invite Code Generator</name>
      <description>Generate unique, human-readable invite codes for leagues (6-8 characters). Ensure uniqueness by checking existing codes in Firestore.</description>
    </feature>
    <feature>
      <name>Join League Screen</name>
      <description>Create screen for joining leagues via invite code input. Validate code, show league preview, and add user to member list on confirmation.</description>
    </feature>
    <feature>
      <name>Create League Screen</name>
      <description>Design screen for creating new leagues with name, optional description, and settings. Generate invite code automatically and show success confirmation.</description>
    </feature>
    <feature>
      <name>Create Check-In Screen</name>
      <description>Build screen for creating check-ins with camera preview, photo capture button, and league selection. Show daily limit status and validation messages.</description>
    </feature>
    <feature>
      <name>Firebase Authentication Service</name>
      <description>Create authentication service wrapper for Firebase Auth. Implement methods for sign-in, sign-up, sign-out, and auth state listening.

Update README.md with instructions on how to make changes in Firebase portal. Instructions in brazilian portuguese</description>
    </feature>
    <feature>
      <name>Firebase Storage Service</name>
      <description>Create service for uploading check-in photos to Firebase Storage. Organize files by user and date, generate secure download URLs.

Update README.md with instructions on how to make changes in Firebase portal. Instructions in brazilian portuguese</description>
    </feature>
    <feature>
      <name>Authentication State Provider</name>
      <description>Create global auth state provider that listens to Firebase auth changes. Manage user session and authentication status throughout the app.</description>
    </feature>
    <feature>
      <name>Check-In Submission Flow</name>
      <description>Orchestrate complete check-in flow: capture photo, compress, upload to Storage, create Firestore document, update league points. Handle errors at each step.</description>
    </feature>
    <feature>
      <name>Email/Password Authentication</name>
      <description>Implement email and password sign-up and sign-in flows with Firebase Auth. Include email verification and password reset functionality.</description>
    </feature>
    <feature>
      <name>Google Sign-In Integration</name>
      <description>Integrate Google Sign-In plugin for social authentication. Configure OAuth credentials for both iOS and Android platforms.</description>
    </feature>
    <feature>
      <name>Leaderboard Calculator Service</name>
      <description>Calculate league rankings based on check-in counts. Update in real-time when new check-ins are submitted. Handle ties appropriately.</description>
    </feature>
    <feature>
      <name>Login Screen UI</name>
      <description>Design and implement login screen with email/password fields, Google Sign-In button, and navigation to sign-up. Include form validation and loading states in Portuguese.</description>
    </feature>
    <feature>
      <name>League Detail Screen</name>
      <description>Show comprehensive league information including members, settings, invite code, and admin actions. Display league statistics and activity summary.</description>
    </feature>
    <feature>
      <name>League Leaderboard Screen</name>
      <description>Display ranked list of league members with points, positions, and user avatars. Highlight current user&apos;s position. Update in real-time.</description>
    </feature>
    <feature>
      <name>Sign-Up Screen UI</name>
      <description>Create sign-up screen with email, password, and name fields. Implement form validation, terms acceptance, and account creation flow.</description>
    </feature>
    <feature>
      <name>My Leagues List Screen</name>
      <description>Display list of leagues user is member of with league names, member counts, and last activity. Include FAB for creating/joining leagues.</description>
    </feature>
    <feature>
      <name>Splash Screen with Auth Check</name>
      <description>Create branded splash screen that checks authentication state on app launch. Route users to login or home screen based on auth status.</description>
    </feature>
    <feature>
      <name>Check-In History Screen</name>
      <description>Show chronological list of user&apos;s check-ins with photos, timestamps, and league names. Support filtering by league and date range.</description>
    </feature>
    <feature>
      <name>League Activity Feed</name>
      <description>Show real-time feed of recent check-ins from all league members. Display user name, photo, and timestamp with infinite scroll pagination.</description>
    </feature>
    <feature>
      <name>Firebase Cloud Messaging Setup</name>
      <description>Configure FCM for push notifications on iOS and Android. Handle token registration and storage. Set up notification channels.

Update README.md with instructions on how to make changes in Firebase portal. Instructions in brazilian portuguese</description>
    </feature>
    <feature>
      <name>User Onboarding Flow</name>
      <description>Create onboarding screens explaining app features, how leagues work, and check-in mechanics. Show once on first launch with skip option.</description>
    </feature>
    <feature>
      <name>League Member Management</name>
      <description>Implement admin functions to remove members, transfer admin role, and manage league settings. Enforce permission checks based on user role.</description>
    </feature>
    <feature>
      <name>League Settings Screen</name>
      <description>Admin screen for editing league name, description, and settings. Show member list with remove options. Display and regenerate invite code.</description>
    </feature>
    <feature>
      <name>Daily Check-In Reminder Scheduler</name>
      <description>Schedule local notifications to remind users to check-in daily. Allow users to customize reminder time and enable/disable per league.</description>
    </feature>
    <feature>
      <name>Push Notification Service</name>
      <description>Create service to send push notifications for league activities. Implement notification handlers for foreground and background states.</description>
    </feature>
    <feature>
      <name>Photo Gallery View</name>
      <description>Display check-in photos in grid gallery format with fullscreen preview. Use cached_network_image for efficient loading. Support swipe navigation.</description>
    </feature>
    <feature>
      <name>Streak Tracking Service</name>
      <description>Track consecutive daily check-ins for users. Calculate current streak and longest streak. Reset on missed days with grace period handling.</description>
    </feature>
    <feature>
      <name>User Profile Screen</name>
      <description>Display user profile with avatar, name, email, total check-ins, current streak, and leagues joined. Include edit profile option.</description>
    </feature>
    <feature>
      <name>Share Check-In to Social Media</name>
      <description>Integrate share plugin to share check-in photos to social media platforms. Generate shareable image with app branding and league info.</description>
    </feature>
    <feature>
      <name>Check-In Notifications</name>
      <description>Send push notifications to league members when someone checks in. Include user name and league name in notification content.</description>
    </feature>
    <feature>
      <name>Android App Icon Configuration</name>
      <description>Configure the Android app launcher icon with the BurgerRats branding. Replace default launcher icons with custom rat mascot icons across all density buckets (mdpi, hdpi, xhdpi, xxhdpi, xxxhdpi). Icons are located at: C:\Users\marce\OneDrive - CK Labs Dev\CKLabs-Projetos\BurgerRats\AppIcons\android\mipmap-* and need to be copied to android/app/src/main/res/. Also configure adaptive icons if needed.</description>
    </feature>
    <feature>
      <name>Complete Color System Implementation</name>
      <description>Implement comprehensive color palette based on BurgerRats brand identity. Create or update lib/shared/theme/app_colors.dart with colors extracted from app icons including: Primary (orange #FF5722), Secondary (gold #FF8F00), Tertiary (brown #6D4C41), semantic colors (success green, warning amber, error red, info blue), surface colors with warm tints, special purpose colors for leaderboards and streaks, and brand gradients. Includes full Material Design 3 ColorScheme for both light and dark themes with WCAG AA accessibility compliance. All colors derived from the rat mascot icon to maintain brand cohesion.</description>
    </feature>
    <feature>
      <name>iOS App Icon Configuration</name>
      <description>Configure the iOS app icon with the BurgerRats branding. Replace the default app icon with custom rat mascot icons. The AppIcon.appiconset is located at: C:\Users\marce\OneDrive - CK Labs Dev\CKLabs-Projetos\BurgerRats\AppIcons\Assets.xcassets\AppIcon.appiconset and needs to replace the existing one at ios/Runner/Assets.xcassets/AppIcon.appiconset. Includes all required sizes for iPhone and iPad (20pt, 29pt, 40pt, 60pt, 76pt, 83.5pt, 1024pt) and App Store icon.</description>
    </feature>
    <feature>
      <name>Edit Profile Screen</name>
      <description>Allow users to update display name, profile photo, and preferences. Upload photo to Storage and update Firestore and Auth profile.</description>
    </feature>
    <feature>
      <name>App Branding Assets Integration</name>
      <description>Integrate BurgerRats branding assets (logos and images) throughout the app. Copy logo assets from C:\Users\marce\OneDrive - CK Labs Dev\CKLabs-Projetos\BurgerRats\ImageSets to assets/images with proper density variants for both platforms. For Android: copy drawable-* folders. For iOS: use logo.png, logo@2x.png, logo@3x.png. Update splash screen, onboarding, and login screens to use these branded assets. Also includes appstore.png (1024x1024) and playstore.png (512x512) for store submissions.</description>
    </feature>
    <feature>
      <name>Theme Configuration with New Color System</name>
      <description>Update lib/shared/theme/app_theme.dart to integrate the new color system. Configure ThemeData for both light and dark modes using the new AppColors ColorSchemes. Define text themes, button styles, card styles, app bar themes, input decoration themes, and other component themes using the branded color palette. Ensure consistent styling across all UI components with warm-tinted surfaces, proper elevation colors, and semantic color usage. Include configuration for gradients on splash screens and achievement badges.</description>
    </feature>
    <feature>
      <name>Dark Mode Theme Support</name>
      <description>Implement complete dark mode support using the dark theme color variants. Create theme provider/notifier to allow users to switch between light, dark, and system themes. Store preference in SharedPreferences. Update MaterialApp to use both lightTheme and darkTheme. Ensure all screens properly respond to theme changes with warm-tinted dark surfaces (#1A1612), lighter primary colors for visibility, and maintained contrast ratios. Test all UI components in both themes to verify WCAG AA compliance and visual consistency. Add theme toggle in settings/profile screen.</description>
    </feature>
    <feature>
      <name>Setup Flutter Localizations Package</name>
      <description>Configure flutter_localizations and intl packages for internationalization support</description>
    </feature>
    <feature>
      <name>Create ARB Files Structure</name>
      <description>Set up ARB (Application Resource Bundle) files for pt-BR and en-US translations</description>
    </feature>
    <feature>
      <name>Generate Localization Classes</name>
      <description>Run Flutter localization generation and create AppLocalizations classes</description>
    </feature>
    <feature>
      <name>Migrate Auth Feature to i18n</name>
      <description>Replace hardcoded Portuguese strings in auth feature with localized strings</description>
    </feature>
    <feature>
      <name>Migrate Leagues Feature to i18n</name>
      <description>Replace hardcoded Portuguese strings in leagues feature with localized strings</description>
    </feature>
    <feature>
      <name>Migrate Profile Feature to i18n</name>
      <description>Replace hardcoded Portuguese strings in profile feature with localized strings</description>
    </feature>
    <feature>
      <name>Migrate Check-ins Feature to i18n</name>
      <description>Replace hardcoded Portuguese strings in check-ins feature with localized strings</description>
    </feature>
    <feature>
      <name>Migrate Shared Widgets to i18n</name>
      <description>Replace hardcoded Portuguese strings in shared widgets and components</description>
    </feature>
    <feature>
      <name>Create Locale Switcher Service</name>
      <description>Implement service to allow users to change app language at runtime</description>
    </feature>
    <feature>
      <name>Add i18n Testing Coverage</name>
      <description>Create tests to ensure localization works correctly across the app</description>
    </feature>
    <feature>
      <name>Localize Notification Messages</name>
      <description>Ensure FCM notification messages support multiple languages</description>
    </feature>
    <feature>
      <name>Adicionar dependência sentry_flutter</name>
      <description>Adicionar o pacote sentry_flutter no pubspec.yaml para monitoramento de crashes e performance tracking. Incluir versão mais recente compatível com Flutter SDK 3.10.1.</description>
    </feature>
    <feature>
      <name>Configurar secrets do Sentry</name>
      <description>Configurar o arquivo .secrets/app_secrets.json com o DSN real do Sentry (slug: burger-rats) e definir configurações de ambiente (dev, stg, prod) incluindo taxas de amostragem de traces apropriadas para cada ambiente.</description>
    </feature>
    <feature>
      <name>Integrar Sentry no main.dart</name>
      <description>Integrar o SentryFlutter.init no main.dart para capturar crashes não tratados, configurar error handlers e envolver o app com SentryWidget para monitoramento automático de performance de widgets.</description>
    </feature>
    <feature>
      <name>Criar SentryService</name>
      <description>Criar um serviço centralizado (lib/core/services/sentry_service.dart) para gerenciar a inicialização do Sentry, configurar contexto de usuário, ambientes e opções de monitoramento. Registrar como @LazySingleton no sistema de DI.</description>
    </feature>
    <feature>
      <name>Capturar contexto de usuário no Sentry</name>
      <description>Configurar o Sentry para capturar e anexar informações do usuário autenticado (ID, email, username) em todos os eventos, crashes e transações. Integrar com auth state provider para atualizar contexto automaticamente no login/logout.</description>
    </feature>
    <feature>
      <name>Tracking de navegação com Sentry</name>
      <description>Integrar SentryNavigatorObserver no GoRouter para rastrear automaticamente navegação entre telas, medir performance de rotas e identificar gargalos na UX. Criar breadcrumbs de navegação para contexto em crashes.</description>
    </feature>
    <feature>
      <name>Monitoramento de performance Firebase</name>
      <description>Instrumentar operações críticas do Firestore, Firebase Auth e Storage com Sentry Transactions e Spans para rastreamento detalhado de performance. Incluir tempos de resposta, erros e métricas de uso.</description>
    </feature>
    <feature>
      <name>Versionamento de releases no Sentry</name>
      <description>Configurar o Sentry para usar automaticamente a versão do pubspec.yaml (versão + build number) como release identifier. Permite rastrear crashes e performance por versão específica do app, facilitando identificação de regressões.</description>
    </feature>
  </implemented_features>

  <additional_requirements>
    <requirement>Minimum iOS version: 12.0</requirement>
    <requirement>Minimum Android SDK: 21 (Android 5.0 Lollipop)</requirement>
    <requirement>Flutter SDK version: 3.x or higher</requirement>
    <requirement>Dart SDK version: 3.x or higher</requirement>
    <requirement>Camera permissions required for check-in photos</requirement>
    <requirement>Photo library access permissions</requirement>
    <requirement>Internet connectivity required for core functionality</requirement>
    <requirement>Push notification permissions for league updates</requirement>
    <requirement>Location permissions (optional) for check-in location tagging</requirement>
    <requirement>Firebase project setup with Firestore, Storage, and Authentication enabled</requirement>
  </additional_requirements>

  <development_guidelines>
    <guideline>Follow Flutter best practices and Material Design 3 guidelines</guideline>
    <guideline>Use Clean Architecture pattern (Presentation, Domain, Data layers)</guideline>
    <guideline>Implement repository pattern for data access abstraction</guideline>
    <guideline>Write unit tests for business logic and widget tests for UI components</guideline>
    <guideline>Use feature-first folder structure for scalability</guideline>
    <guideline>Implement proper error handling with user-friendly messages in Portuguese</guideline>
    <guideline>Follow BLoC or Riverpod patterns for state management consistency</guideline>
    <guideline>Use dependency injection for testability</guideline>
    <guideline>Implement offline-first approach with local caching where applicable</guideline>
    <guideline>Follow semantic versioning for releases</guideline>
    <guideline>Document public APIs and complex business logic</guideline>
    <guideline>Use environment configuration for Firebase (dev, staging, prod)</guideline>
    <guideline>Implement proper image compression before upload to optimize storage</guideline>
  </development_guidelines>

  <implementation_roadmap>
    <phase>
      <name>Phase 1 - Project Setup &amp; Authentication</name>
      <status>in_progress</status>
      <description>Initialize Flutter project structure, configure Firebase integration, implement user authentication (email/password, Google Sign-In), create basic app navigation shell, and design system setup with themes and common widgets.</description>
    </phase>
    <phase>
      <name>Phase 2 - League Management</name>
      <status>pending</status>
      <description>Implement league creation flow, league discovery and joining via invite codes, league settings and member management, league listing for users, and real-time league data synchronization.</description>
    </phase>
    <phase>
      <name>Phase 3 - Check-in System</name>
      <status>pending</status>
      <description>Build camera integration for photo capture, implement check-in creation with photo upload, enforce one check-in per day rule validation, create check-in history view with photo gallery, and implement photo compression and optimization.</description>
    </phase>
    <phase>
      <name>Phase 4 - Leaderboard &amp; Rankings</name>
      <status>pending</status>
      <description>Develop real-time leaderboard calculations, implement ranking display with user positions, add streak tracking for consecutive check-ins, create statistics and analytics views, and build activity feed for league members.</description>
    </phase>
    <phase>
      <name>Phase 5 - Notifications &amp; Social Features</name>
      <status>pending</status>
      <description>Integrate Firebase Cloud Messaging for push notifications, implement check-in reminders, add social sharing capabilities, create achievement system and badges, and build user profile enhancements.</description>
    </phase>
    <phase>
      <name>Phase 6 - Polish &amp; Launch Preparation</name>
      <status>pending</status>
      <description>Performance optimization and testing, UI/UX refinements based on feedback, app store assets preparation (screenshots, descriptions), beta testing program, and production deployment to App Store and Google Play.</description>
    </phase>
  </implementation_roadmap>
</project_specification>